{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8">
    <title>{% block title %}Sports Day{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/sortable.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        midnight: '#0f172a',
                        dusk: '#1e293b',
                        dawn: '#f8fafc',
                        ink: '#0f172a',
                        sky: '#0369a1',
                    }
                }
            }
        }
    </script>
    <style>
        body.sunlight-theme {
            background: #f8fafc;
            color: #0f172a;
        }
        .sunlight-theme .bg-slate-900,
        .sunlight-theme .bg-slate-900\/60,
        .sunlight-theme .bg-slate-900\/70,
        .sunlight-theme .bg-slate-900\/40,
        .sunlight-theme .bg-slate-950\/60,
        .sunlight-theme .bg-slate-950\/70,
        .sunlight-theme .bg-slate-950\/40 {
            background-color: rgba(255, 255, 255, 0.95) !important;
        }
        .sunlight-theme .border-slate-800,
        .sunlight-theme .border-slate-700 {
            border-color: rgba(15, 23, 42, 0.25) !important;
        }
        .sunlight-theme .text-slate-400,
        .sunlight-theme .text-slate-300 {
            color: #0f172a !important;
        }
        .sunlight-theme .bg-dusk\/80,
        .sunlight-theme .bg-dusk\/95 {
            background-color: rgba(255, 255, 255, 0.88) !important;
        }
        .sunlight-theme .shadow-slate-900\/40 {
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.12) !important;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="sunlight-theme bg-dawn text-ink min-h-full flex flex-col">
    <header class="bg-white/90 backdrop-blur border-b border-slate-200 sticky top-0 z-30 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4 flex flex-wrap items-center justify-between gap-3">
            <div class="flex items-center gap-3">
                <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-sky/10 text-sky-700 font-semibold">SD</span>
                <div>
                    <a href="{% url 'sportsday:dashboard' %}" class="text-lg font-semibold tracking-wide text-ink">Sports Day Console</a>
                    {% if active_meet %}
                        <p class="text-xs text-slate-600">Active meet: {{ active_meet.name }}</p>
                    {% endif %}
                </div>
            </div>
            {% with url_name=request.resolver_match.url_name %}
                <nav class="hidden md:flex items-center gap-2 text-sm">
                    <a href="{% url 'sportsday:dashboard' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'dashboard' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Dashboard</a>
                    <a href="{% url 'sportsday:meet-list' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'meet-list' or url_name == 'meet-detail' or url_name == 'meet-create' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Meets</a>
                    <a href="{% url 'sportsday:students' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'students' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Students</a>
                    <a href="{% url 'sportsday:teachers' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'teachers' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Teachers</a>
                    <a href="{% url 'sportsday:events' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'events' or url_name == 'event-detail' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Events</a>
                    <a href="{% url 'sportsday:leaderboards' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'leaderboards' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Leaderboards</a>
                </nav>
            {% endwith %}
        </div>
    </header>
    <main class="flex-1 w-full">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 space-y-6">
            {% if messages %}
                <div class="space-y-3">
                    {% for message in messages %}
                        <div class="rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm text-ink shadow">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
            {% block content %}{% endblock %}
        </div>
    </main>
    {% block mobile_nav %}{% endblock %}
    <footer class="bg-white border-t border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4 text-xs text-slate-600">&copy; {% now "Y" %} Pavonify Sports Day</div>
    </footer>
</body>
</html>
