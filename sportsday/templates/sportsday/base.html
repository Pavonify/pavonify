{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8">
    <title>{% block title %}Sports Day{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/sortable.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        midnight: '#0f172a',
                        dusk: '#1e293b',
                        dawn: '#f8fafc',
                        ink: '#0f172a',
                        sky: '#0369a1',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --sd-bg: #f4f7fb;
            --sd-surface: #ffffff;
            --sd-surface-muted: #f1f5f9;
            --sd-border: #d6e3f3;
            --sd-text: #0f172a;
            --sd-text-muted: #475569;
        }
        body.sunlight-theme {
            background: var(--sd-bg);
            color: var(--sd-text);
        }
        .sunlight-theme .bg-slate-900,
        .sunlight-theme .bg-slate-900\/40,
        .sunlight-theme .bg-slate-900\/60,
        .sunlight-theme .bg-slate-900\/70,
        .sunlight-theme .bg-slate-800,
        .sunlight-theme .bg-slate-800\/40,
        .sunlight-theme .bg-slate-800\/60,
        .sunlight-theme .bg-slate-950\/40,
        .sunlight-theme .bg-slate-950\/60,
        .sunlight-theme .bg-slate-950\/70,
        .sunlight-theme .bg-slate-700,
        .sunlight-theme .bg-slate-700\/40,
        .sunlight-theme .bg-slate-700\/60,
        .sunlight-theme .bg-dusk,
        .sunlight-theme .bg-dusk\/80,
        .sunlight-theme .bg-dusk\/95 {
            background-color: var(--sd-surface) !important;
        }
        .sunlight-theme .border-slate-800,
        .sunlight-theme .border-slate-700,
        .sunlight-theme .border-slate-600 {
            border-color: var(--sd-border) !important;
        }
        .sunlight-theme .divide-slate-800,
        .sunlight-theme .divide-slate-700 {
            --tw-divide-color: var(--sd-border) !important;
        }
        .sunlight-theme .text-slate-100,
        .sunlight-theme .text-slate-200,
        .sunlight-theme .text-slate-300,
        .sunlight-theme .text-slate-400 {
            color: var(--sd-text) !important;
        }
        .sunlight-theme .text-slate-500,
        .sunlight-theme .text-slate-600 {
            color: var(--sd-text-muted) !important;
        }
        .sunlight-theme .text-sky-200,
        .sunlight-theme .text-sky-300 {
            color: #0369a1 !important;
        }
        .sunlight-theme .shadow-slate-900\/40 {
            box-shadow: 0 12px 32px rgba(15, 23, 42, 0.12) !important;
        }
        .sunlight-theme input,
        .sunlight-theme select,
        .sunlight-theme textarea {
            background-color: var(--sd-surface) !important;
            color: var(--sd-text) !important;
            border-color: var(--sd-border) !important;
        }
        .sunlight-theme input:focus,
        .sunlight-theme select:focus,
        .sunlight-theme textarea:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
            border-color: #0ea5e9 !important;
        }
        .sunlight-theme input::placeholder,
        .sunlight-theme textarea::placeholder {
            color: #94a3b8 !important;
        }
        .sunlight-theme .bg-slate-900\/80 {
            background-color: var(--sd-surface-muted) !important;
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body class="sunlight-theme bg-dawn text-ink min-h-full flex flex-col">
    <header class="bg-white/90 backdrop-blur border-b border-slate-200 sticky top-0 z-30 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4 flex flex-wrap items-center justify-between gap-3">
            <div class="flex items-center gap-3">
                <img
                    src="{% static 'harrow-international-logo.png' %}"
                    alt="Harrow International Bengaluru logo"
                    class="h-10 w-10 object-contain"
                />
                <div>
                    <a href="{% url 'sportsday:dashboard' %}" class="text-lg font-semibold tracking-wide text-ink">Sports Day Console</a>
                    {% if active_meet %}
                        <p class="text-xs text-slate-600">Active meet: {{ active_meet.name }}</p>
                    {% endif %}
                </div>
            </div>
            {% with url_name=request.resolver_match.url_name %}
                <nav class="hidden md:flex items-center gap-2 text-sm">
                    <a href="{% url 'sportsday:dashboard' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'dashboard' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Dashboard</a>
                    <a href="{% url 'sportsday:meet-list' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'meet-list' or url_name == 'meet-detail' or url_name == 'meet-create' or url_name == 'meet-update' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Meets</a>
                    <a href="{% url 'sportsday:students' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'students' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Students</a>
                    <a href="{% url 'sportsday:teachers' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'teachers' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Teachers</a>
                    <a href="{% url 'sportsday:sport-types' %}" class="px-3 py-2 rounded-md transition {% if url_name == 'sport-types' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Sports</a>
                    <a href="{% url 'sportsday:events' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'events' or url_name == 'event-detail' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Events</a>
                    <a href="{% url 'sportsday:leaderboards' %}{% if active_meet %}?meet={{ active_meet.slug }}{% endif %}" class="px-3 py-2 rounded-md transition {% if url_name == 'leaderboards' %}bg-sky/10 text-sky-700 font-semibold{% else %}hover:bg-slate-200{% endif %}">Leaderboards</a>
                </nav>
            {% endwith %}
        </div>
    </header>
    <main class="flex-1 w-full">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6 space-y-6">
            {% if messages %}
                <div class="space-y-3">
                    {% for message in messages %}
                        <div class="rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm text-ink shadow">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
            {% block content %}{% endblock %}
        </div>
    </main>
    {% block mobile_nav %}{% endblock %}
    <footer class="bg-white border-t border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-4 text-xs text-slate-600">&copy; {% now "Y" %} Pavonify Sports Day</div>
    </footer>
</body>
</html>
